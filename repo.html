<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>報工紀錄</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/repo.css">
</head>
<body>
    <div class="wrap">
       <section class="header">
        <p class="return"><a href="index.html">返回</a></p>
        <button id="clearReportsBtn">清空報工紀錄</button>
       </section>
       <section class="title"><h2 class="title-h2">報工紀錄</h2></section>
       <section class="main">
        <table class="main-table">
            <thead>
                <tr>
                    <th>站別</th>
                    <th>製令單號</th>
                    <th>品名</th>
                    <th>品號</th>
                    <th>作業人員</th>
                    <th>完成數量</th>
                    <th>不良數量</th>
                    <th>報工時間</th>
                </tr>
            </thead>
            <tbody id="reportBody">
            </tbody>
        </table>
       </section>
    </div>
    <script>
        const clearBtn = document.getElementById('clearReportsBtn');
        clearBtn.addEventListener('click', function(){
                localStorage.removeItem('reports');
                location.reload();
            });



        const body =document.getElementById('reportBody');
        function addRow(r){
        body.insertAdjacentHTML("afterbegin",`
        <tr>
            <td data-label="站別">${r.station}</td>
            <td data-label="製令單號">${r.orderNo}</td>
            <td data-label="品名">${r.itemName}</td>
            <td data-label="品號">${r.itemNo}</td>
            <td data-label="作業人員">${r.operator}</td>
            <td data-label="完成數量">${r.goodNumber}</td>
            <td data-label="不良數量">${r.badNumber}</td>
            <td data-label="報工時間">${r.time}</td>
      </tr>
        `); 
        }   
       
        const reports = JSON.parse(localStorage.getItem("reports")) || [];
        body.innerHTML = "";
        if (reports.length === 0){
            body.insertAdjacentHTML("afterbegin",`
            <tr>
                <td colspan="8">目前沒有報工紀錄</td>
            </tr>
            `);
        } else {
           reports.forEach(r => addRow(r));        }
    
    </script>
         
</body>
</html>